FROM amd64/debian:stretch

RUN echo 'deb-src http://deb.debian.org/debian stretch main' >> /etc/apt/sources.list
RUN echo 'deb-src http://security.debian.org/debian-security stretch/updates main' >> /etc/apt/sources.list
RUN echo 'deb-src http://deb.debian.org/debian stretch-updates main' >> /etc/apt/sources.list

RUN dpkg --add-architecture i386

RUN apt-get update
RUN apt-get -y install wget git build-essential m4 xz-utils libisl-dev libisl-dev:i386

ENV VERSION=12
ENV GCCVERSION=6.5.0
COPY freebsd/SDK/freebsd$VERSION.sdk.tar.xz  /root
COPY freebsd/SDK/freebsd$VERSION.sdk.32.tar.xz  /root
COPY freebsd/SDK/symlink.sh /root
COPY freebsd/SDK/symlink32.sh /root
COPY freebsd/installdeps.sh /root
COPY freebsd/build.sh /root
COPY freebsd/extractSDK.sh /root

WORKDIR /root
RUN ./extractSDK.sh
RUN ./build.sh
RUN ./installdeps.sh
RUN ./build32.sh
RUN ./installdeps32.sh


